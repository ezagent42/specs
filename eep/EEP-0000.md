# EEP-0000 — EEP Purpose and Convention

> **EEP**: 0000
> **标题**: EEP Purpose and Convention
> **类型**: Process
> **状态**: Active
> **作者**: Allen
> **创建日期**: 2026-02-28
> **关联 Spec 版本**: v0.9.5

---

## Abstract

EEP（ezagent Enhancement Proposal）是 ezagent 项目的设计提案机制。本文档定义 EEP 的目的、类型、生命周期、格式规范和工作流程。

## 1. EEP 是什么

EEP 是一份设计文档，用于：

- 提出对 ezagent 协议、产品或流程的**重大变更**
- 记录设计决策的**背景和推理过程**（不仅是"做什么"，更是"为什么"）
- 在实现前充分评估**跨层影响**

小型修复和文档勘误不需要 EEP，直接提交 Issue 或 PR 即可。

**判断标准：如果一个变更会影响两个或以上 spec 文件，或引入新的协议原语/Extension/Socialware，则需要 EEP。**

## 2. EEP 类型

| 类型 | 代号 | 说明 | 示例 |
|------|------|------|------|
| **Standards** | `S` | 协议层变更：新增/修改 Extension、Datatype、Hook 行为、Socialware 原语 | 新增 EXT-18 Bridge |
| **Product** | `P` | 产品层变更：CLI/HTTP/App/Relay 的重大功能变更 | Relay 支持 Push Gateway |
| **Informational** | `I` | 设计指南、最佳实践、架构讨论，不产生规范性约束 | Socialware 设计模式指南 |
| **Process** | `X` | 项目流程变更：EEP 机制本身、发布流程、贡献指南 | 本文档 |

## 3. EEP 生命周期

```
                  reject
Draft ──→ Review ──→ Rejected
              │
              ├──→ Accepted ──→ Implemented ──→ Final
              │
              └──→ Deferred
                     │
                     └──→ (回到 Draft 或 Withdrawn)

Withdrawn: 作者主动撤回
Superseded: 被更新的 EEP 取代
```

| 状态 | 含义 |
|------|------|
| **Draft** | 初稿，开放讨论 |
| **Review** | 设计基本成熟，进入正式评审 |
| **Accepted** | 评审通过，等待实现 |
| **Implemented** | 实现完成，等待合入对应 spec 版本 |
| **Final** | 已合入 spec，EEP 归档 |
| **Rejected** | 评审未通过，记录拒绝理由 |
| **Deferred** | 暂缓，待条件成熟后重新讨论 |
| **Withdrawn** | 作者主动撤回 |
| **Superseded** | 被新 EEP 取代（标注取代者编号） |

**状态流转规则：**

- Draft → Review：作者认为提案已充分讨论，提交评审
- Review → Accepted：评审者（项目维护者）确认设计可行
- Accepted → Implemented：参考实现完成
- Implemented → Final：变更合入对应 spec 版本的 CHANGELOG

## 4. EEP 格式

### 4.1 文件命名

```
EEP-{NNNN}.md
```

四位数字，从 0000 开始。编号一经分配不再更改。

### 4.2 必需章节

每个 EEP **MUST** 包含以下章节：

```markdown
# EEP-{NNNN} — {标题}

> **EEP**: {编号}
> **标题**: {简短描述，≤60 字符}
> **类型**: Standards | Product | Informational | Process
> **状态**: Draft | Review | Accepted | ...
> **作者**: {姓名}
> **创建日期**: {YYYY-MM-DD}
> **关联 Spec 版本**: {当前 spec 版本，如 v0.9.5}
> **目标 Spec 版本**: {预期合入的版本，如 v0.10}（Accepted 后填写）
> **取代**: {如取代旧 EEP，标注编号}（可选）
> **被取代**: {如被新 EEP 取代，标注编号}（可选）

## Abstract
{≤200 字。提案做什么、为谁做、为什么现在做。}

## Motivation
{为什么需要这个变更？现状有什么问题？不做会怎样？}

## Design
{技术设计的核心内容。这是 EEP 的主体。}

## Impact Analysis
{对现有架构各层的影响评估。Standards 类型 MUST 包含。}

## Alternatives Considered
{考虑过哪些替代方案？为什么选择当前方案？}

## Implementation Strategy
{分阶段实现计划、依赖关系、验收标准。}

## Open Questions
{尚未解决的问题、需要社区讨论的决策点。}

## Changelog
{EEP 自身的修订记录。}
```

### 4.3 Impact Analysis 格式

Standards 类型的 EEP **MUST** 包含以下影响矩阵：

```markdown
### 影响矩阵

| 文件 | 影响程度 | 变更内容 |
|------|---------|---------|
| specs/architecture.md | 🟡 中等 | §1.3 新增拓扑描述 |
| specs/bus-spec.md | 🟢 低 | §3.2 Hook 注册表新增条目 |
| specs/extensions-spec.md | 🔴 高 | 新增 §19 完整 Extension 定义 |
| ... | ... | ... |

图例：🔴 高（新增/重写章节）| 🟡 中等（修改现有内容）| 🟢 低（新增引用/注释）| ⚪ 无影响
```

### 4.4 语言规范

- 文档主体使用**中文**，技术术语保留英文原文
- 规范性关键词使用 RFC 2119 约定：MUST / SHOULD / MAY
- 代码示例使用 fenced code blocks，标注语言类型

## 5. 编号分配

| 范围 | 用途 |
|------|------|
| 0000–0099 | Process EEP（项目流程、EEP 机制） |
| 0100–0499 | Standards EEP（协议变更） |
| 0500–0799 | Product EEP（产品变更） |
| 0800–0999 | Informational EEP（指南、讨论） |

## 6. 目录结构

EEP 文件存放在 docs 仓库的 `eep/` 目录下：

```
docs/
├── eep/
│   ├── EEP-0000.md          # 本文档
│   ├── EEP-0001.md          # Bridge Extension
│   └── ...
├── specs/
├── products/
├── plan/
└── ...
```

在 `README.md` 的文档导航中新增 `eep/` 部分。

## 7. EEP Index

| EEP | 类型 | 状态 | 标题 |
|-----|------|------|------|
| [0000](EEP-0000.md) | Process | Active | EEP Purpose and Convention |
| [0001](EEP-0001.md) | Standards | Draft | Bridge Extension (EXT-18) |

## Changelog

| 日期 | 变更 |
|------|------|
| 2026-02-28 | 初始版本 |
